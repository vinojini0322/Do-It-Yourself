<!DOCTYPE html>
<html>

<head>
    <title>Confirm Order</title>
    <link rel="stylesheet" href="../CSS.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../themes/Craftzy.min.css" />
    <link rel="stylesheet" href="../themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/minified/html5-qrcode.min.js"></script>
</head>

<body class="ui-mobile-viewport ui-overlay-a">
    <div id="ConfirmOrder" data-role="page" data-position="fixed">

        <!-- Header -->
        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">

            <div class="ui-grid-b">
                <div class="ui-block-a" style="width: 15%;">
                    <div class="ui-bar ui-bar-a"><img src="../images/logo1.png"></div>
                </div>

                <div class="ui-block-b" style="width:73%; margin: auto; color:red;">
                    <div class="ui-bar ui-bar-a" style="color:red;">

                        <form class="ui-filterable" style="background-color:#dddddd8f;border-radius: 12px;">
                            <input type="search" name="search" id="search-basic" value="" />
                    </div>
                </div>

                <div class="ui-block-c" style="width: 10%;  position: relative;"><a target="_self" href="Offers.html"
                        class="ui-link"> <img src="../icons/icon-QRAR.png" 
                            style="height: 42px; width: 42px; padding-top: 20%;"> </a></div>
            </div>
        </div>

        <div role="orderConfirmation" class="ui-content" style="background-color: #551122">
            <div>
                <h2 style="font-family:Roboto Slab; text-align:center">
                    Order Confirmation
                </h2>
            </div>

            <div class="confirmOrderList">
                <div class="ui-body-a">
                    <table id="itemsList" style="margin-bottom: 25px">
                    </table>

                </div>
            </div>
            <div class="emptySpace" style="padding-top: 20px">
            </div>

            <div class="ui-body">
                <div class="ui-grid-a">
                    <table class="orderSummary">
                        <tr>
                            <td>
                                   <label class="voucherCode" for="voucherInput">Voucher code</label>
                            </td>
                               <td> <input class="voucherCodeValue" type="text" name="voucherInput" id="voucherInput">

                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="confirmTotalText" for="textinput">Total</label>
                            </td>
                            <td>
                                    <input type="text" name="textinput" id="textinput">
                            </td>
                        </tr>
                    </table>
                    <button class="ConfirmOrder" onclick="window.location='./PaymentGateway.html'">Confirm
                        Order</button>
                </div>

            </div>
        </div>


        <!-- Navigation -->
        <div data-role="footer" data-position="fixed">
            <nav data-role="navbar">
                <ul class="ui-grid-d">

                    <li class="ui-block-a"><a target="_self" href="Home.html" data-icon="icons-home" data-theme="a"
                            data-transition="slide">Home</a></li>
                    <li class="ui-block-b"><a target="_self" href="Categories.html" data-icon="icons-category"
                            data-theme="a" data-transition="slide">Category</a>
                    </li>
                    <li class="ui-block-c"><a target="_self" href="MyCart.html" data-icon="icons-cart" data-theme="a"
                            data-transition="slide">Cart</a></li>
                    <li class="ui-block-d"><a target="_self" href="Game.html" data-icon="icons-game" data-theme="a"
                            data-transition="slide">Game</a></li>
                    <li class="ui-block-e"><a target="_self" href="MyProfile_Customer.html" data-icon="icons-profile"
                            data-theme="a" data-transition="slide">Profile</a></li>

                </ul>
            </nav>
        </div>

</body>

<script>
    function addElement(item) {
        return '<tr>' +
            '<td class="itemPic" rowspan="3"><img src=' + item.picUrl + ' style="padding-left: 48px; padding-top: 27px; height: 136px; width: 105px;"></td>' +
            '<td class="itemName" colspan="4">' + item.name + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td class="itemPrice" colspan="4">LKR ' + item.price + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td class="itemQty">Qty ' + item.quantity + '</td>' +
            '</tr>'
        '<tr>' +
            '<td rowspan="3"><img src=' + item.picUrl + ' style="padding-left: 25px; padding-top: 10px;">' +
            '</td>' +
            '<td colspan="4" style="text-align: -webkit-center; padding-top: 10%">' + item.name + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td colspan="4" style="text-align: center"> LKR ' + item.price + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td colspan="1"></td>' +
            '<td style="text-align: -webkit-center">' +
            '<button class="ui-btn ui-corner-all ui-btn-inline ui-icon-plus ui-btn-icon-notext ui-mini" onclick="addQty(' + item.id + ')">Confirm Order</button>' +
            '</td>' +
            '<td style="padding-top: 5%">' + item.quantity + '</td>' +
            '<td>' +
            '<button class="ui-btn ui-corner-all ui-btn-inline ui-icon-minus ui-btn-icon-notext ui-mini" onclick="reduceQty(' + item.id + ')">Confirm Order</button>' +
            '</td>' +
            '</tr>' +
            '<tr>' +
            '</tr>' +
            '<tr>' +
            '</tr>';

        // '<tr>' +
        // '<td rowspan="3"><img src=' + item.picUrl + ' style="padding-left: 25px; padding-top: 10px;"></td>' +
        // '<td colspan="3"> </td>' +
        // '<td>' + item.name + '</td>' +
        // '</tr>' +
        // '<tr>' +
        // '<td colspan="3" style="padding-left:60px"></td>' +
        // '<td>LKR ' + item.price + '</td>' +
        // '</tr>' +
        // '<tr>' +
        // '<td colspan="3"></td>' +
        // '<td>Qty ' + item.quantity + '</td>' +
        // '</tr>'

    }
</script>

<script>
    function calculateTotal() {
        var total = 0;
        var shoppedItems = JSON.parse(localStorage.getItem('shoppedItems'));
        $.each(shoppedItems, function (i, item) {
            total = total + (item.price * item.quantity);
        });
        document.getElementById("textinput").value = 'LKR ' + total;
    }
</script>

<script>
    var shoppedItems = JSON.parse(localStorage.getItem('shoppedItems'));
    $.each(shoppedItems, function (i, item) {
        $('#itemsList').append(addElement(item));
    });
    calculateTotal()
</script>

</html>